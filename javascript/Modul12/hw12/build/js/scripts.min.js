"use strict";var form=document.querySelector(".bookmarks__form"),addButton=document.querySelector(".bookmark-add__button"),container=document.querySelector(".bookmarks__container"),input=document.querySelector(".bookmark__input"),urlListWrap=document.querySelector(".bookmarks__list");function handleOnDomcreated(){var e=localStorage.getItem("urlList")?JSON.parse(localStorage.getItem("urlList")):[];updateLocalStorage([]),createMarkup(e.reverse())}function updateLocalStorage(e){localStorage.setItem("urlList",JSON.stringify(e))}function checkForPrevSaved(e){var t=JSON.parse(localStorage.getItem("urlList")),r=[];if(t.map(function(e){return r.push(e.name)}),!r.includes(e))return!0}function handleAddBookmark(e){e.preventDefault();var t=event.target,r=JSON.parse(localStorage.getItem("urlList"));if("Add"===t.textContent){if(!/^(http:\/\/www\.|https:\/\/www\.|http:\/\/|https:\/\/)?[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,5}(:[0-9]{1,5})?(\/.*)?$/.test(input.value))return alert("Not valid Url"),void form.reset();var a={name:""},o=r.reverse();checkForPrevSaved(input.value)?(a.name=input.value,o.push(a),createMarkup(r.reverse()),updateLocalStorage(o),form.reset()):(alert("This URL has been already saved!!!"),form.reset())}}function createMarkup(e){urlListWrap.innerHTML="";var t=document.querySelector("#bookmark__template").innerHTML.trim(),r=Handlebars.compile(t),a=e.reduce(function(e,t){return e+r(t)},"");urlListWrap.insertAdjacentHTML("beforeend",a)}function handleRemoveBookmark(e){e.preventDefault();var t=event.target;if("Delete"===t.textContent){var r=t.parentNode,a=t.previousElementSibling.textContent,o=JSON.parse(localStorage.getItem("urlList")).filter(function(e){return e.name!=a});localStorage.removeItem("urlList"),updateLocalStorage(o),r.remove(),form.reset()}}form.addEventListener("click",handleAddBookmark),container.addEventListener("click",handleRemoveBookmark),document.addEventListener("DOMContentLoaded",handleOnDomcreated);